{% extends "@Annonce/Default/layout.html.twig" %}
{% block content %}
    <script>
        function myfunction() {
            var e = document.getElementById("gouva");
            var s = document.getElementById('delega');
            var result = e.options[e.selectedIndex].text;
            if (result == "Tunis") {
                while (s.length > 0) {
                    s.remove(0);
                }

                var sel = document.getElementById('delega');
                var opt = document.createElement('option');
                opt.text = "Ain Zaghouan";
                sel.add(opt);
                var opt1 = document.createElement("option");
                opt1.text = "Bab Souika";
                sel.add(opt1);
                var opt2 = document.createElement('option');
                opt2.text = "Beb Bhar";
                sel.add(opt2);
                var opt3 = document.createElement("option");
                opt3.text = "El Kabaria";
                sel.add(opt3);
                var opt4 = document.createElement('option');
                opt4.text = "El Kram";
                sel.add(opt4);
                var opt5 = document.createElement("option");
                opt5.text = "El Menzah";
                sel.add(opt5);
                var opt6 = document.createElement('option');
                opt6.text = "El Omrane";
                sel.add(opt6);
                var opt7 = document.createElement("option");
                opt7.text = "El Omrane Superieur";
                sel.add(opt7);
                var opt8 = document.createElement('option');
                opt8.text = "Karthage";
                sel.add(opt8);
                var opt9 = document.createElement("option");
                opt9.text = "La Goulette";
                sel.add(opt9);
                var opt10 = document.createElement("option");
                opt10.text = "La Marsa";
                sel.add(opt10);

            } else if (result == "Aryana") {
                while (s.length > 0) {
                    s.remove(0);
                }
                var sel = document.getElementById('delega');
                var opt = document.createElement('option');
                opt.text = "Ariana Ville";
                sel.add(opt);
                var opt1 = document.createElement("option");
                opt1.text = "Ettadhamen";
                sel.add(opt1);
                var opt2 = document.createElement('option');
                opt2.text = "Kalaat Landlous";
                sel.add(opt2);
                var opt3 = document.createElement("option");
                opt3.text = "La Soukra";
                sel.add(opt3);
                var opt4 = document.createElement('option');
                opt4.text = "Mnihla";
                sel.add(opt4);
                var opt5 = document.createElement("option");
                opt5.text = "Raoued";
                sel.add(opt5);
                var opt6 = document.createElement('option');
                opt6.text = "Sidi Thabet";
                sel.add(opt6);
            } else {
                while (s.length > 0) {
                    s.remove(0);
                }
                var sel = document.getElementById('delega');
                var opt = document.createElement('option');
                opt.text = "";
                sel.add(opt);

            }
        }

    </script>

    <div class="row page-titles">
        <div class="col-md-5 align-self-center">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">Annonces</li>
                <li class="breadcrumb-item active"><a href="{{ path('annonce_Location') }}">Location</a></li>
                <li class="breadcrumb-item active"><a href="{{ path('Ajouter_annonceL/') }}">Ajouter</a></li>
            </ol>
        </div>
        <div class="col-md-7 align-self-center text-right">
            <div class="d-flex justify-content-end align-items-center">

                <a href="{{ path('Ajouter_annonceL/') }}"  type="button" class="btn btn-info "><i class="fa fa-plus-circle"></i> Ajouter</a>
            </div>
        </div>
    </div>
    <div class="row">

        <div class="col-sm-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Modifer Annonce Location</h4>
                    <form method="post"  enctype="multipart/form-data">
                        {{ form_start(form) }}

                        <div class="form-group ">
                            <label for="desc"  class="control-label">Description</label>
                            <textarea class="form-control"  id="desc" rows="4" name="desc" minlength="4" maxlength="300" required >{{ annonce.description }}</textarea>
                        </div>
                        <div class="form-group ">
                            <label for="num"  class="control-label">Telephone</label>
                            <input class="form-control"   type="number" id="num" name="numtel" value="{{ annonce.numtel }}" min="10000000" max="99999999" required>
                        </div>
                        <div class="form-group ">
                            {% if annonce.gouvernorat =='Tunis' %}
                            <label for="gouva"  class="control-label">Gouvernerat</label>
                            <select  id="gouva" name="gouvernerat" class="form-control" required onclick="myfunction()">
                                <option value="Tunis" selected>Tunis</option>
                                <option value="Aryana">Aryana</option>
                            </select>
                        </div>
                        <div class="form-group">
                        <label for="delega"  class="control-label">Delegation</label>
                        <select  id="delega" name="delegation"   class="form-control" required>
                            {% for delegas in delegs %}
                                {% if annonce.delegation == delegas.nomDeleg %}
                                    <option value="{{ delegas.nomDeleg }}" selected>{{ delegas.nomDeleg }}</option>
                                {% elseif annonce.delegation != delegas.nomDeleg %}
                                    <option value="{{ delegas.nomDeleg }}">{{ delegas.nomDeleg }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    {% elseif annonce.gouvernorat =='Aryana' %}
                    <label for="gouva"  class="control-label">Gouvernerat</label>
                    <select  id="gouva" name="gouvernerat" class="form-control" required onclick="myfunction()">
                        <option value="Tunis" >Tunis</option>
                        <option value="Aryana" selected>Aryana</option>
                    </select>
                    </div>
                        <div class="form-group">
                            <label for="delega"  class="control-label">Delegation</label>
                            <select  id="delega" name="delegation"   class="form-control" required>
                                {% for delegas in delegas %}
                                    {% if annonce.delegation == delegas.nomDeleg %}
                                        <option value="{{ delegas.nomDeleg }}" selected>{{ delegas.nomDeleg }}</option>
                                    {% elseif annonce.delegation != delegas.nomDeleg %}
                                        <option value="{{ delegas.nomDeleg }}" >{{ delegas.nomDeleg }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                        {% endif %}
                        <div class="form-group ">
                            <label for="adr"  class="control-label">Addresse</label>
                            <input class="form-control" type="text" id="adr" name="address" value="{{ annonce.address }}" minlength="4" maxlength="50" required>
                        </div>

                        <div class="form-group">
                            <label for="pr" class="control-label">Prix Jour</label>
                            <input class="form-control" type="number" min="1" minlength="1" value="{{ annonce.prixJour }}" maxlength="5" id="pr" name="prixjour" required>
                        </div>
                        <div class="form-group">
                            <label for="pr" class="control-label">Prix Heure</label>
                            <input class="form-control" type="number" min="1" minlength="1" value="{{ annonce.prixHeure }}" maxlength="5" id="pr" name="prixheure" required>
                        </div>
                        <div class="form-group ">

                            <label for="ph" class="control-label">Photo</label>
                            <input type="file" id="ph" class="dropify" data-show-remove="false" data-default-file="{{ asset('uploads/Annonces/')~annonce.photo }}" name="photo" accept="image/x-png,image/gif,image/jpeg" />

                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-success"> <i class="fa fa-check"></i>Mofifier</button>
                            <a type="button" class="btn btn-secondary" href="{{ path('annonce_homepage') }}">Annuler</a>
                        </div>
                        {{ form_end (form) }}
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}